graph TB
    subgraph Client["クライアント層"]
        Web["Webブラウザ"]
        Mobile["モバイルアプリ"]
    end

    subgraph Server["アプリケーション層"]
        API["FastAPI サーバー"]
        Auth["認証サービス"]
        Chat["チャット管理"]
        History["履歴管理"]
    end

    subgraph AI["AI処理層"]
        LLM["オープンソースLLM"]
        PE["プロンプトエンジニアリング"]
        VDB["ベクトルDB"]
    end

    subgraph Data["データ層"]
        DB[(リレーショナルDB)]
        Doc["社内文書ストレージ"]
        Log["ログストレージ"]
    end

    Web --> API
    Mobile --> API
    
    API --> Auth
    API --> Chat
    API --> History
    
    Chat --> LLM
    Chat --> PE
    Chat --> VDB
    
    VDB --> Doc
    History --> DB
    Auth --> DB
    
    LLM --> Log
    Chat --> Log

    classDef client fill:#e1f5fe,stroke:#01579b
    classDef server fill:#e8f5e9,stroke:#1b5e20
    classDef ai fill:#fce4ec,stroke:#880e4f
    classDef data fill:#fff3e0,stroke:#e65100

    class Web,Mobile client
    class API,Auth,Chat,History server
    class LLM,PE,VDB ai
    class DB,Doc,Log data
